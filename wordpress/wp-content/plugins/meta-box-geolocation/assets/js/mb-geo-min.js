!function($){"use strict";var e={autoComplete:[],dataGeo:null,place:{},init:function(){this.dataGeo=this.getDataGeo(),"undefined"!=typeof this.dataGeo&&this.initAutoComplete()},getDataGeo:function(){return null!=this.dataGeo?this.dataGeo:$(".data-geo").data("geo")},getAutoCompleteField:function(){var e=[];return $(".rwmb-input input[name*=address]").each(function(){e.push($(this).attr("name"))}),e},initAutoComplete:function(){var t=this.getAutoCompleteField(),n=this;$.each(t,function(t,i){var a=$("input[name='"+i+"']");n.autoComplete[t]=new google.maps.places.Autocomplete(a[0],n.dataGeo),n.autoComplete[t].addListener("place_changed",function(){a.trigger("selected_address");var t=this.getPlace();if("undefined"!=typeof t){var n=a.parents().hasClass("rwmb-group-clone"),i=n?a.parents(".rwmb-group-clone"):a.parents(".rwmb-meta-box"),o=i.find(".rwmb-geo-binding");o.each(function(){var n=$(this).data("binding"),i=e.getFieldData(n,t);"address"!=n&&"undefined"!=typeof i&&$(this).siblings(".rwmb-input").children().val(i)})}})})},getFieldData:function(t,n){if(["formatted_address","id","name","place_id","reference","url","vicinity"].indexOf(t)>-1&&"undefined"!=typeof n&&"undefined"!=typeof n[t])return n[t];if(console.log(n),"lat"===t)return n.geometry.location.lat();if("lng"===t)return n.geometry.location.lng();if("geometry"===t)return n.geometry.location.lat()+","+n.geometry.location.lng();var i="";return t.indexOf("+")>-1&&(t=t.split("+")),$.isArray(t)?($.each(t,function(t,a){a=a.trim(),a.indexOf("'")>-1||a.indexOf('"')>-1?(a=a.replace(/['"]+/g,""),i+=a):i+=e.getFieldData(a,n)}),i):($.each(n.address_components,function(e,n){var a=!0,o=t;if(t.indexOf("short:")>-1&&(a=!1,o=t.replace("short:","")),n.types.indexOf(o)>-1)return i=a?n.long_name:n.short_name,!1}),i)}};e.init(),$("#wpbody").on("clone_completed",function(){e.init()})}(jQuery);